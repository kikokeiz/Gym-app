# ğŸ‹ï¸â€â™‚ï¸ Gym App - Backend

**Gym App** es una aplicaciÃ³n de gestiÃ³n de gimnasio que permite a los usuarios registrarse, iniciar sesiÃ³n, registrar entrenamientos, hacer seguimiento de su progreso fÃ­sico, gestionar membresÃ­as y comprar productos.

---

## ğŸ“ Estructura del proyecto

/backend
â”œâ”€â”€ api/
â”‚   â””â”€â”€ authService

â”œâ”€â”€ controllers/                 # LÃ³gica de negocio para cada ruta
â”‚   â”œâ”€â”€ authController.js        # Registro, login, validaciÃ³n de token
â”‚   â””â”€â”€ progressController.js    # CRUD de progreso del usuario
â”‚
â”œâ”€â”€ models/                      # DefiniciÃ³n de esquemas de MongoDB (Mongoose)
â”‚   â”œâ”€â”€ User.js                  # Modelo de usuario
â”‚   â””â”€â”€ Progress.js              # Modelo de progreso (reps, peso, etc.)
â”‚
â”œâ”€â”€ routes/                      # Define las rutas de la API
â”‚   â”œâ”€â”€ authRoutes.js            # /api/auth (registro, login)
â”‚   â””â”€â”€ progressRoutes.js        # /api/progress (progreso del entrenamiento)
â”‚   â””â”€â”€ protectedRoutes.js       
â”‚   â””â”€â”€ shopRoutes.js            # /api/progress (ruta de tienda)
â”‚   â””â”€â”€ workoutRoutes.js         # /api/progress (ruta de datos de entrenamiento)
|
â”œâ”€â”€ middlewares/                 # Funciones middleware reutilizables
â”‚   â””â”€â”€ auth.js                  # Verifica JWT y protege rutas privadas
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js                    # ConexiÃ³n a MongoDB con mongoose
â”‚
â”œâ”€â”€ .env                         # Variables de entorno (JWT_SECRET, MONGO_URI, PORT)
â”œâ”€â”€ .gitignore                   # Ignora node_modules, .env, etc.
â”œâ”€â”€ server.js                    # Punto de entrada de la aplicaciÃ³n Express
â”œâ”€â”€ package.json
â””â”€â”€ README.md                    # DocumentaciÃ³n inicial del backend


/frontend
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/              # ImÃ¡genes, logos, fuentes
â”‚   â”œâ”€â”€ components/          # Componentes reutilizables (Botones, Cards, Layouts, etc.)
â”‚   â”œâ”€â”€ pages/               # PÃ¡ginas completas como Home, Login, TrackingPage
â”‚   â”œâ”€â”€ services/            # LÃ³gica de llamadas a la API (axios)
â”‚   â”œâ”€â”€ App.tsx              # Componente raÃ­z
â”‚   â”œâ”€â”€ main.tsx             # Punto de entrada (ReactDOM.createRoot)
â”‚   â””â”€â”€ vite.config.ts       
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â””â”€â”€ .env


---

## ğŸš€ Funcionalidades principales

- Registro e inicio de sesiÃ³n de usuarios con JWT
- Registro y consulta de entrenamientos (workouts)
- CatÃ¡logo y compra de productos

---

## ğŸ§° TecnologÃ­as utilizadas

- Node.js
- Express.js
- MongoDB + Mongoose
- JSON Web Tokens (JWT)
- Bcrypt
- CORS
- Dotenv

---

## ğŸ› ï¸ Proceso de Desarrollo

Este proyecto fue realizado como Trabajo de Fin de Ciclo (TFC) del ciclo formativo de **Desarrollo de Aplicaciones Multiplataforma (DAM)**. El objetivo fue construir una aplicaciÃ³n completa para la gestiÃ³n de un gimnasio, que ofreciera funcionalidades tanto para los usuarios (entrenamientos, seguimiento, compras) como para los administradores.

---

### ğŸ”§ ElecciÃ³n de TecnologÃ­as

#### ğŸ”¹ Backend (Servidor y API REST)

Para el desarrollo del backend optÃ© por **Node.js** junto con el framework **Express.js**, una combinaciÃ³n moderna y eficiente para la creaciÃ³n de servidores y APIs REST. Las principales razones para esta elecciÃ³n fueron:

- Facilidad y rapidez para levantar un servidor.
- Amplia comunidad y documentaciÃ³n.
- Capacidad de crear APIs escalables y modulares.

Como base de datos, utilicÃ© **MongoDB**, una base de datos NoSQL que me permitiÃ³:

- Almacenar informaciÃ³n en un formato similar a JSON (documentos BSON).
- Trabajar de forma flexible con colecciones dinÃ¡micas.
- Implementar de forma sencilla relaciones entre usuarios, entrenamientos, productos, etc.

Para la autenticaciÃ³n y seguridad:

- **JWT (JSON Web Tokens)** me permitiÃ³ crear sesiones seguras sin necesidad de mantener el estado en el servidor.
- **bcryptjs** fue utilizado para cifrar contraseÃ±as antes de almacenarlas.
- **dotenv** ayudÃ³ a mantener configuraciones sensibles (como claves y conexiones) fuera del cÃ³digo fuente.

#### ğŸ”¹ Frontend (AplicaciÃ³n Android)

Para la aplicaciÃ³n mÃ³vil, desarrollada para Android, elegÃ­ **Kotlin** como lenguaje de programaciÃ³n, combinado con **Jetpack Compose**, una moderna herramienta de creaciÃ³n de interfaces declarativas.

Motivos de esta elecciÃ³n:

- Kotlin es mÃ¡s moderno y seguro que Java, y es oficialmente soportado por Google.
- Jetpack Compose permite crear interfaces mÃ¡s limpias y mantenibles con menos cÃ³digo.
- La estructura declarativa facilita la adaptaciÃ³n a diferentes pantallas y estados visuales.

AdemÃ¡s, utilicÃ©:

- **Retrofit** para hacer peticiones HTTP hacia el backend.
- **Room** para almacenar datos localmente, permitiendo cierto grado de funcionalidad offline.
- **ViewModel** y **LiveData** como parte del patrÃ³n **MVVM**, facilitando la separaciÃ³n entre lÃ³gica de negocio y la interfaz.

  Esta sin terminar debido a su complejidad.

#### ğŸ”¹ Herramientas Complementarias

- **Postman** para probar los endpoints de la API durante el desarrollo.
- **MongoDB Atlas** para desplegar la base de datos en la nube.
- **Git y GitHub** para control de versiones y colaboraciÃ³n.
- **Android Studio** como entorno principal de desarrollo de la app.

---

### âš™ï¸ Desarrollo del Proyecto

#### ğŸ“¦ Backend

ComencÃ© desarrollando la API RESTful. SeguÃ­ el patrÃ³n de arquitectura **MVC** (Modelo - Vista - Controlador) para mantener el cÃ³digo organizado.

1. **Modelos**: definÃ­ esquemas de Mongoose para usuarios, entrenamientos, productos y membresÃ­as.
2. **Controladores**: cada uno maneja la lÃ³gica correspondiente a su ruta (crear, leer, actualizar, eliminar datos).
3. **Rutas**: expuse endpoints con rutas protegidas (requieren JWT) y otras pÃºblicas (como login y registro).
4. **Middlewares**: implementÃ© middlewares personalizados como `authMiddleware` para verificar el token en las rutas privadas.

Las pruebas de los endpoints las realicÃ© con Postman, validando tanto casos de Ã©xito como errores.

#### ğŸ“± Frontend

Una vez funcionando la API, empecÃ© el desarrollo de la app Android.

- UtilicÃ© **MVVM** para mantener una separaciÃ³n clara entre interfaz (View), lÃ³gica de negocio (ViewModel) y acceso a datos (Repository).
- Cada pantalla (inicio de sesiÃ³n, registro, ejercicios, productos, perfil) fue creada con Jetpack Compose.
- UsÃ© **Retrofit** para la comunicaciÃ³n con el backend y configurÃ© el envÃ­o automÃ¡tico del token JWT con cada peticiÃ³n.
- UtilicÃ© **Room** para guardar localmente el historial de ejercicios, permitiendo ver el progreso incluso sin conexiÃ³n.

#### ğŸ”„ IntegraciÃ³n Frontend - Backend

La conexiÃ³n entre la app y el backend se realiza mediante peticiones HTTP con JSON. Algunas medidas tomadas fueron:

- Almacenamiento del token JWT de forma segura para sesiones persistentes.
- Manejo de errores y mensajes claros al usuario si la sesiÃ³n expirÃ³, si hubo errores de red, o si los datos ingresados eran incorrectos.
- SincronizaciÃ³n de datos entre el dispositivo y el servidor, actualizando la base de datos tras cada acciÃ³n del usuario.

---

### ğŸ” Seguridad y Buenas PrÃ¡cticas

- Uso de **bcrypt** para almacenar contraseÃ±as de forma segura.
- Uso de **JWT** para proteger rutas sensibles mediante autenticaciÃ³n basada en tokens.
- SeparaciÃ³n de variables sensibles con `dotenv`.
- ValidaciÃ³n bÃ¡sica en formularios (puede mejorarse en futuras versiones).
- OrganizaciÃ³n modular del cÃ³digo para facilitar mantenimiento y escalabilidad.

---

### ğŸ“š ConclusiÃ³n y Aprendizajes

Este proyecto me permitiÃ³ aplicar y reforzar muchos conceptos clave aprendidos durante el ciclo formativo, como:

- Desarrollo de APIs RESTful desde cero.
- AutenticaciÃ³n segura con JWT.
- Arquitectura limpia y patrones como MVC (backend) y MVVM (frontend).
- ComunicaciÃ³n entre aplicaciones mÃ³viles y servicios web.
- Uso de tecnologÃ­as actuales del ecosistema Android como Jetpack Compose y Room.

AdemÃ¡s, enfrentÃ© y solucionÃ© desafÃ­os reales de desarrollo como:

- GestiÃ³n del estado y sincronizaciÃ³n de datos.
- ValidaciÃ³n de formularios y manejo de errores.
- Problemas con la comunicaciÃ³n entre emulador y backend local.

El resultado es una aplicaciÃ³n funcional y escalable que puede evolucionar fÃ¡cilmente con nuevas funcionalidades en el futuro.

## ğŸš€ CÃ³mo iniciar el proyecto (Backend)

### ğŸ“ Requisitos previos

Antes de empezar, asegÃºrate de tener instalados en tu equipo:

- **Node.js** (versiÃ³n 14 o superior recomendada)  
  Puedes descargarlo desde [nodejs.org](https://nodejs.org/)
- **npm** (viene incluido con Node.js)
- **MongoDB** (puedes usar MongoDB local o una instancia en la nube como MongoDB Atlas)
- Un editor de cÃ³digo (por ejemplo, Visual Studio Code)

---

### ğŸ”§ Pasos para iniciar el servidor backend y frontend

1. **Clona el repositorio**

   git clone https://github.com/kikokeiz/Gym-app.git

2. **Instalar dependecias**

   npm install

3. **Inicciar servidor backend**

   node server.js

4. **Iniciar servidor frontend**

   npm run dev
